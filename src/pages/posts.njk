---
  title: Posts
  useVue: true
---

<p>This is an archive of everything I post, filterable by <a rel="external" href="https://indieweb.org/posts">post type.</a></p>

<form>
  {% for tag in collections.tagList %}
    <div>
      <label>{{ tag }}</label>
      <input id="{{ tag }}" name="{{ tag }}" type="checkbox">
    </div>
  {% endfor %}
</form>

<ul>
  {% for post in collections.posts %}
    <li class="post-entry" data-tags={{ post.data.tags | dump }}>
      <a href={{ post.url }}>{{ post.data.title }}</a>
    </li>
  {% endfor %}
</ul>

<script>
  const inputs = [...document.querySelectorAll('form input')];

  inputs.forEach(input => input.addEventListener('click', (ev) => updateList()))
  
  const updateList = () => {
    const checked = inputs.filter(input => input.checked);
    
    [...document.querySelectorAll('.post-entry')].forEach(entry => {
      checked.length === 0 
      ? entry.hidden = false 
      : checked.forEach(tag => {
        entry.hidden = entry.dataset.tags.includes(tag.id) ? false : true; 
      })
    })
  }
</script>