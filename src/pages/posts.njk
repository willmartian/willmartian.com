---
  title: posts
---

<p id="post-preamble">This is an archive of everything I post, filterable by tag type.</a></p>

<form>
  {% for tag in collections.tagList %}
    <div class="tag-toggle">
      <input id="{{ tag }}" name="{{ tag }}" type="checkbox">
      <label for="{{ tag }}">{{ tag }}</label>
    </div>
  {% endfor %}
</form>

<ul id="post-list">
  {% for post in collections.posts | reverse %}
    <li class="post-entry" data-tags={{ post.data.tags | dump }}>
      <a href={{ post.url }}>{{ post.data.title }}</a>
    </li>
  {% endfor %}
</ul>

<script>
  //TODO add url params
  const inputs = [...document.querySelectorAll('form input')];

  inputs.forEach(input => input.addEventListener('click', (ev) => updateList()))
  
  const updateList = () => {
    const checked = inputs.filter(input => input.checked);
    
    [...document.querySelectorAll('.post-entry')].forEach(entry => {
      checked.length === 0 
      ? entry.hidden = false 
      : checked.forEach(tag => {
        entry.hidden = entry.dataset.tags.includes(tag.id) ? false : true; 
      })
    })
  }
</script>

<noscript>
  <style>
    #post-preamble, form {
      display: none;
    }
  </style>
<noscript>